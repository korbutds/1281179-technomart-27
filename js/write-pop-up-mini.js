var mapBtn=document.querySelector(".map-btn"),writePopUp=document.querySelector(".write-pop-up"),closeBtn=writePopUp.querySelector(".close-btn"),form=writePopUp.querySelector("form"),userName=writePopUp.querySelector("[name = name]"),email=writePopUp.querySelector("[name = e-mail]"),letter=writePopUp.querySelector("[name = text-letter]"),isStorageSupport=!0,storage=localStorage.getItem("");try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}mapBtn.addEventListener("click",function(e){e.preventDefault(),writePopUp.classList.remove("pop-up-close"),storage?email.focus():userName.focus()}),closeBtn.addEventListener("click",function(e){e.preventDefault(),writePopUp.classList.add("pop-up-close"),writePopUp.classList.remove("pop-up-error")}),form.addEventListener("submit",function(e){!userName.value||!email.value||text-letter.value?(e.preventDefault(),writePopUp.classList.remove("pop-up-error"),writePopUp.offsetWidth=writePopUp.offsetWidth,writePopUp.classList.add("pop-up-error")):isStorageSupport&&localStorage.setItem("userName",userName.value)}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),writePopUp.classList.contains("pop-up-close")||(writePopUp.classList.add("pop-up-close"),writePopUp.classList.remove("pop-up-error")))});
