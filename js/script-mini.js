var writeBtn=document.querySelector(".write-btn"),writePopUp=document.querySelector(".write-pop-up"),closeWrite=document.querySelector(".write-pop-up .close-btn"),popupClose="pop-up-close",popupError="pop-up-error",form=document.querySelector(".write-form"),userName=document.querySelector("#write-name"),email=document.querySelector("#write-email"),letter=document.querySelector("#letter-us"),isStorageSupport=!0,storageName=localStorage.getItem(""),storageEmail=localStorage.getItem(""),mapButton=document.querySelector(".map-section button"),mapPopUp=document.querySelector(".map-pop-up"),mapClose=document.querySelector(".map-pop-up .close-btn"),basketButton=document.querySelectorAll(".basket-btn"),cartPopUp=document.querySelector(".cart-section"),cartClose=document.querySelector(".cart-section .close-btn");try{storageName=localStorage.getItem("userName"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}writePopUp&&(writeBtn.addEventListener("click",function(e){e.preventDefault(),writePopUp.classList.remove(popupClose),storageName?(userName.value=storageName,email.value=storageEmail,letter.focus()):userName.focus()}),closeWrite.addEventListener("click",function(e){e.preventDefault(),writePopUp.classList.add(popupClose),writePopUp.classList.remove(popupError)}),form.addEventListener("submit",function(e){userName.value&&email.value&&letter.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("email",email.value)):(e.preventDefault(),writePopUp.classList.remove(popupError),writePopUp.offsetWidth=writePopUp.offsetWidth,writePopUp.classList.add(popupError))})),mapPopUp&&(mapButton.addEventListener("click",function(e){e.preventDefault(),mapPopUp.classList.add(popupClose),mapPopUp.classList.remove(popupClose)}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopUp.classList.add(popupClose)}));for(var i=0;i<basketButton.length;i++)basketButton[i].addEventListener("click",function(e){e.preventDefault(),cartPopUp.classList.remove(popupClose)});cartClose.addEventListener("click",function(e){e.preventDefault(),cartPopUp.classList.add(popupClose)}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),writePopUp&&!writePopUp.classList.contains(popupClose)&&(writePopUp.classList.add(popupClose),writePopUp.classList.remove(popupError)),mapPopUp&&!mapPopUp.classList.contains(popupClose)&&mapPopUp.classList.add(popupClose),cartPopUp&&!cartPopUp.classList.contains(popupClose)&&cartPopUp.classList.add(popupClose))});
