var writeBtn=document.querySelector(".write-btn"),writePopUp=document.querySelector(".write-pop-up"),writeClose=document.querySelector(".write-pop-up .close-btn"),popupCloseClass="pop-up-close",popupErrorClass="pop-up-error",form=document.querySelector(".write-form"),userName=document.querySelector("#write-name"),email=document.querySelector("#write-email"),letter=document.querySelector("#letter-us"),isStorageSupport=!0,storageName=localStorage.getItem(""),storageEmail=localStorage.getItem(""),mapButton=document.querySelector(".map-section button"),mapPopUp=document.querySelector(".map-pop-up"),mapClose=document.querySelector(".map-pop-up .close-btn"),basketButton=document.querySelectorAll(".basket-btn"),cartPopUp=document.querySelector(".cart-section"),cartClose=document.querySelector(".cart-section .close-btn");try{storageName=localStorage.getItem("userName"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}writePopUp&&(writeBtn.addEventListener("click",function(e){e.preventDefault(),writePopUp.classList.remove(popupCloseClass),storageName?(userName.value=storageName,email.value=storageEmail,letter.focus()):userName.focus()}),writeClose.addEventListener("click",function(e){e.preventDefault(),writePopUp.classList.add(popupCloseClass),writePopUp.classList.remove(popupErrorClass)}),form.addEventListener("submit",function(e){userName.value&&email.value&&letter.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("email",email.value)):(e.preventDefault(),writePopUp.classList.remove(popupErrorClass),writePopUp.offsetWidth=writePopUp.offsetWidth,writePopUp.classList.add(popupErrorClass))})),mapPopUp&&(mapButton.addEventListener("click",function(e){e.preventDefault(),mapPopUp.classList.add(popupCloseClass),mapPopUp.classList.remove(popupCloseClass)}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopUp.classList.add(popupCloseClass)}));for(var i=0;i<basketButton.length;i++)basketButton[i].addEventListener("click",function(e){e.preventDefault(),cartPopUp.classList.remove(popupCloseClass)});cartClose.addEventListener("click",function(e){e.preventDefault(),cartPopUp.classList.add(popupCloseClass)}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),writePopUp&&!writePopUp.classList.contains(popupCloseClass)&&(writePopUp.classList.add(popupCloseClass),writePopUp.classList.remove(popupErrorClass)),mapPopUp&&!mapPopUp.classList.contains(popupCloseClass)&&mapPopUp.classList.add(popupCloseClass),cartPopUp&&!cartPopUp.classList.contains(popupCloseClass)&&cartPopUp.classList.add(popupCloseClass))});
