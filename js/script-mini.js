var popupClose="pop-up-close",popupError="pop-up-error",basketButton=document.querySelectorAll(".basket-btn"),cartPopUp=document.querySelector(".cart-section"),cartClose=cartPopUp.querySelector(".close-btn");window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),cartPopUp.classList.contains(popupClose)||cartPopUp.classList.add(popupClose))});for(var i=0;i<basketButton.length;i++)basketButton[i].addEventListener("click",function(e){e.preventDefault(),cartPopUp.classList.add(popupClose),cartPopUp.classList.remove(popupClose)});cartClose.addEventListener("click",function(e){e.preventDefault(),cartPopUp.classList.add(popupClose)});var writeBtn=document.querySelector(".write-btn"),writePopUp=document.querySelector(".write-pop-up"),closeWrite=writePopUp.querySelector(".close-btn"),popupClose="pop-up-close",popupError="pop-up-error",form=writePopUp.querySelector("form"),userName=writePopUp.querySelector("#write-name"),email=writePopUp.querySelector("#write-email"),letter=writePopUp.querySelector("#letter-us"),isStorageSupport=!0,storageName=localStorage.getItem(""),storageEmail=localStorage.getItem(""),mapButton=document.querySelector(".map-section button"),mapPopUp=document.querySelector(".map-pop-up"),mapClose=mapPopUp.querySelector(".close-btn"),basketButton=document.querySelectorAll(".basket-btn"),cartPopUp=document.querySelector(".cart-section"),cartClose=cartPopUp.querySelector(".close-btn");try{storageName=localStorage.getItem("userName"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}writeBtn.addEventListener("click",function(e){e.preventDefault(),writePopUp.classList.remove(popupClose),storageName?(userName.value=storageName,email.value=storageEmail,letter.focus()):userName.focus()}),closeWrite.addEventListener("click",function(e){e.preventDefault(),writePopUp.classList.add(popupClose),writePopUp.classList.remove(popupError)}),form.addEventListener("submit",function(e){userName.value&&email.value&&letter.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("email",email.value)):(e.preventDefault(),writePopUp.classList.remove(popupError),writePopUp.offsetWidth=writePopUp.offsetWidth,writePopUp.classList.add(popupError))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),writePopUp.classList.contains(popupClose)&&mapPopUp.classList.contains(popupClose)&&cartPopUp.classList.contains(popupClose)||(writePopUp.classList.add(popupClose),writePopUp.classList.remove(popupError),mapPopUp.classList.add(popupClose),cartPopUp.classList.add(popupClose)))}),mapButton.addEventListener("click",function(e){e.preventDefault(),mapPopUp.classList.add(popupClose),mapPopUp.classList.remove(popupClose)}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopUp.classList.add(popupClose)});for(var i=0;i<basketButton.length;i++)basketButton[i].addEventListener("click",function(e){e.preventDefault(),cartPopUp.classList.add(popupClose),cartPopUp.classList.remove(popupClose)});cartClose.addEventListener("click",function(e){e.preventDefault(),cartPopUp.classList.add(popupClose)});
